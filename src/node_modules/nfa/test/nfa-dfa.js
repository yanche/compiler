
var assert = require('assert');
var nfa = require('nfa');
var utility = require('utility');
var testutil = require('./test-util.js');

var epsilonTransitionOfStates = testutil.epsilonTransitionOfStates;

describe('nfa convert to dfa', function () {
    it('epsilon 1', function () {
        var idGen = new utility.IdGen();
        var state0 = new State(idGen);
        var state1 = new State(idGen);
        var state2 = new State(idGen);
        var state3 = new State(idGen);
        state3.setTerminal(true);
        state0.transition('', state1);
        state0.transition('a', state0);
        state1.transition('', state2);
        state1.transition('b', state1);
        state2.transition('', state3);
        state2.transition('c', state2);
        state3.transition('d', state3);
        var states = [state0, state1, state2, state3];
        var epclosuremap = utility.calcClosure(epsilonTransitionOfStates(states));
        var dfaStart = todfa(state0, epclosuremap);
        dfa.printTransition(dfaStart);
    });
});
