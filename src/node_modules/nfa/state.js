
var utility = require('utility');

var State = function (id) {
    this._id = id;
    this._tmap = new Map(); //transition map
};
State.prototype.addTransition = function (symbol, statenum) {
    if (!utility.isNonNegInt(statenum))
        throw new Error('state number must be non-neg integer: ' + statenum);
    if (!utility.isStr(symbol)) //empty string is epsilon transition
        throw new Error('bad transition symbol: ' + symbol);
    if (this._tmap.has(symbol))
        this._tmap.get(symbol).add(statenum);
    else
        this._tmap.set(symbol, new Set().add(statenum));
};
//return a set of state num
State.prototype.getTransition = function (symbol) {
    return this._tmap.get(symbol);
};
State.prototype.getAllTransitionSymbols = function () {
    return [...this._tmap].map(function (t) { return t[0]; });
};
State.prototype.getId = function () {
    return this._id;
};

module.exports = State;
