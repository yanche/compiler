
var utility = require('utility');

var State = function (idGen) {
    this._id = idGen.newId();
    this._tmap = new Map(); //transition map
    this._terminal = false; //is terminal state
};
State.prototype.getAllTransitions = function () {
    return [...this._tmap];
};
State.prototype.transition = function (ch, state) {
    if(state == null)
        throw new Error('null state is not acceptable');
    if(!utility.isStr(ch) || ch.length != 1)
        throw new Error('bad transition character: ' + ch);
    if(this._tmap.has(ch))
        throw new Error('already has transition by given character: ' + ch);
    this._tmap.set(ch, state);
    return this;
};
State.prototype.go = function (ch) {
    return this._tmap.get(ch);
};
State.prototype.terminal = function (t) {
    if(arguments.length > 0)
        this._terminal = Boolean(t);
    return this._terminal;
};
State.prototype.getId = function () {
    return this._id;
};

module.exports = State;
